(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e12c2fe8"],{"01db":function(t,e,n){"use strict";var o=n("4ea4");e.__esModule=!0,e.default=void 0;var i=n("e5f6"),a=n("18d0"),s=n("5329"),r=n("d593"),c=o(n("a451")),l=o(n("493d")),u=o(n("cb5c")),d=(0,i.createNamespace)("dropdown-item"),f=d[0],p=d[1],h=f({mixins:[(0,s.PortalMixin)({ref:"wrapper"}),(0,r.ChildrenMixin)("vanDropdownMenu")],props:{value:null,title:String,disabled:Boolean,titleClass:String,options:{type:Array,default:function(){return[]}},lazyRender:{type:Boolean,default:!0}},data:function(){return{transition:!0,showPopup:!1,showWrapper:!1}},computed:{displayTitle:function(){var t=this;if(this.title)return this.title;var e=this.options.filter((function(e){return e.value===t.value}));return e.length?e[0].text:""}},watch:{showPopup:function(t){this.bindScroll(t)}},beforeCreate:function(){var t=this,e=function(e){return function(){return t.$emit(e)}};this.onOpen=e("open"),this.onClose=e("close"),this.onOpened=e("opened")},methods:{toggle:function(t,e){void 0===t&&(t=!this.showPopup),void 0===e&&(e={}),t!==this.showPopup&&(this.transition=!e.immediate,this.showPopup=t,t&&(this.parent.updateOffset(),this.showWrapper=!0))},bindScroll:function(t){var e=this.parent.scroller,n=t?a.on:a.off;n(e,"scroll",this.onScroll,!0)},onScroll:function(){this.parent.updateOffset()},onClickWrapper:function(t){this.getContainer&&t.stopPropagation()}},render:function(){var t=this,e=arguments[0],n=this.parent,o=n.zIndex,i=n.offset,a=n.overlay,s=n.duration,r=n.direction,d=n.activeColor,f=n.closeOnClickOverlay,h=this.options.map((function(n){var o=n.value===t.value;return e(c.default,{attrs:{clickable:!0,icon:n.icon,title:n.text},key:n.value,class:p("option",{active:o}),style:{color:o?d:""},on:{click:function(){t.showPopup=!1,n.value!==t.value&&(t.$emit("input",n.value),t.$emit("change",n.value))}}},[o&&e(l.default,{class:p("icon"),attrs:{color:d,name:"success"}})])})),v={zIndex:o};return"down"===r?v.top=i+"px":v.bottom=i+"px",e("div",[e("div",{directives:[{name:"show",value:this.showWrapper}],ref:"wrapper",style:v,class:p([r]),on:{click:this.onClickWrapper}},[e(u.default,{attrs:{overlay:a,position:"down"===r?"top":"bottom",duration:this.transition?s:0,lazyRender:this.lazyRender,overlayStyle:{position:"absolute"},closeOnClickOverlay:f},class:p("content"),on:{open:this.onOpen,close:this.onClose,opened:this.onOpened,closed:function(){t.showWrapper=!1,t.$emit("closed")}},model:{value:t.showPopup,callback:function(e){t.showPopup=e}}},[h,this.slots("default")])])])}});e.default=h},"0af8":function(t,e,n){n("ef8d"),n("6025"),n("b8aa"),n("a733"),n("0ef8"),n("ff82"),n("835b")},1183:function(t,e,n){"use strict";n("92a1")},"55f4":function(t,e,n){"use strict";e.__esModule=!0,e.default=void 0;var o=n("e5f6"),i=n("742b"),a=n("d593"),s=n("55fb"),r=(0,o.createNamespace)("dropdown-menu"),c=r[0],l=r[1],u=c({mixins:[(0,a.ParentMixin)("vanDropdownMenu"),(0,s.ClickOutsideMixin)({event:"click",method:"onClickOutside"})],props:{zIndex:[Number,String],activeColor:String,overlay:{type:Boolean,default:!0},duration:{type:[Number,String],default:.2},direction:{type:String,default:"down"},closeOnClickOverlay:{type:Boolean,default:!0}},data:function(){return{offset:0}},computed:{scroller:function(){return(0,i.getScroller)(this.$el)},opened:function(){return this.children.some((function(t){return t.showWrapper}))},barStyle:function(){if(this.opened&&(0,o.isDef)(this.zIndex))return{zIndex:1+this.zIndex}}},methods:{updateOffset:function(){if(this.$refs.bar){var t=this.$refs.bar.getBoundingClientRect();"down"===this.direction?this.offset=t.bottom:this.offset=window.innerHeight-t.top}},toggleItem:function(t){this.children.forEach((function(e,n){n===t?e.toggle():e.showPopup&&e.toggle(!1,{immediate:!0})}))},onClickOutside:function(){this.children.forEach((function(t){t.toggle(!1)}))}},render:function(){var t=this,e=arguments[0],n=this.children.map((function(n,o){return e("div",{attrs:{role:"button",tabindex:n.disabled?-1:0},class:l("item",{disabled:n.disabled}),on:{click:function(){n.disabled||t.toggleItem(o)}}},[e("span",{class:[l("title",{active:n.showPopup,down:n.showPopup===("down"===t.direction)}),n.titleClass],style:{color:n.showPopup?t.activeColor:""}},[e("div",{class:"van-ellipsis"},[n.slots("title")||n.displayTitle])])])}));return e("div",{class:l()},[e("div",{ref:"bar",style:this.barStyle,class:l("bar",{opened:this.opened})},[n]),this.slots("default")])}});e.default=u},"55fb":function(t,e,n){"use strict";e.__esModule=!0,e.ClickOutsideMixin=void 0;var o=n("18d0"),i=function(t){return{props:{closeOnClickOutside:{type:Boolean,default:!0}},data:function(){var e=this,n=function(n){e.closeOnClickOutside&&!e.$el.contains(n.target)&&e[t.method]()};return{clickOutsideHandler:n}},mounted:function(){(0,o.on)(document,t.event,this.clickOutsideHandler)},beforeDestroy:function(){(0,o.off)(document,t.event,this.clickOutsideHandler)}}};e.ClickOutsideMixin=i},"835b":function(t,e,n){},"88d6":function(t,e,n){},"8b27":function(t,e,n){n("ef8d"),n("95ed")},"92a1":function(t,e,n){},"95ed":function(t,e,n){},"9f9b":function(t,e,n){"use strict";var o,i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-row",{staticClass:"title-bar",attrs:{type:"flex",align:"center"}},[n("van-col",{attrs:{span:"6"}},[n("span",{staticClass:"iconfont icon-arrow-left",on:{click:t.goback}}),n("span",{staticClass:"iconfont icon-home",on:{click:t.gohome}})]),n("van-col",{staticClass:"title",attrs:{span:"12"}},[n("div",{ref:"title"},[t._v(t._s(t.title))])])],1)},a=[],s=(n("b0c0"),n("ade3")),r=(n("a899"),n("79b5")),c=n.n(r),l=(n("bec3"),n("06a3")),u=n.n(l),d=(n("f619"),n("493d")),f=n.n(d),p={name:"TopNavBar",components:(o={},Object(s["a"])(o,f.a.name,f.a),Object(s["a"])(o,u.a.name,u.a),Object(s["a"])(o,c.a.name,c.a),o),props:{title:{default:"",type:String},referer:{default:"",type:String},popup:{default:!1,type:Boolean}},data:function(){return{show:!1}},mounted:function(){},methods:{goback:function(){this.popup?this.$emit("close"):0==this.referer.length?this.$router.go(-1):this.$router.push({path:this.referer})},gohome:function(){this.$router.push({path:"/"})}}},h=p,v=(n("de48"),n("2877")),g=Object(v["a"])(h,i,a,!1,null,"0682cc47",null);e["a"]=g.exports},cb5c:function(t,e,n){"use strict";var o=n("4ea4");e.__esModule=!0,e.default=void 0;var i=n("e5f6"),a=n("e8a2"),s=o(n("493d")),r=(0,i.createNamespace)("popup"),c=r[0],l=r[1],u=c({mixins:[(0,a.PopupMixin)()],props:{round:Boolean,duration:[Number,String],closeable:Boolean,transition:String,safeAreaInsetBottom:Boolean,closeIcon:{type:String,default:"cross"},closeIconPosition:{type:String,default:"top-right"},position:{type:String,default:"center"},overlay:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0}},beforeCreate:function(){var t=this,e=function(e){return function(n){return t.$emit(e,n)}};this.onClick=e("click"),this.onOpened=e("opened"),this.onClosed=e("closed")},render:function(){var t,e=arguments[0];if(this.shouldRender){var n=this.round,o=this.position,a=this.duration,r="center"===o,c=this.transition||(r?"van-fade":"van-popup-slide-"+o),u={};if((0,i.isDef)(a)){var d=r?"animationDuration":"transitionDuration";u[d]=a+"s"}return e("transition",{attrs:{name:c},on:{afterEnter:this.onOpened,afterLeave:this.onClosed}},[e("div",{directives:[{name:"show",value:this.value}],style:u,class:l((t={round:n},t[o]=o,t["safe-area-inset-bottom"]=this.safeAreaInsetBottom,t)),on:{click:this.onClick}},[this.slots(),this.closeable&&e(s.default,{attrs:{role:"button",tabindex:"0",name:this.closeIcon},class:l("close-icon",this.closeIconPosition),on:{click:this.close}})])])}}});e.default=u},de48:function(t,e,n){"use strict";n("88d6")},f619:function(t,e,n){n("ef8d"),n("b8aa"),n("a733")},fe3f:function(t,e,n){"use strict";n.r(e);var o,i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container",attrs:{id:"resources"}},[n("top-nav-bar",{attrs:{title:t.title}}),n("div",{staticClass:"resources-list-wrap",class:{hasDropdown:t.categories.length>8}},[n("van-tabs",{attrs:{color:"#1989fa","title-active-color":"#1989fa"},model:{value:t.categoryActive,callback:function(e){t.categoryActive=e},expression:"categoryActive"}},t._l(t.categories,(function(e){return n("van-tab",{key:e.id,attrs:{title:e.name}},[n("van-pull-refresh",{staticClass:"resources-list-wrap",on:{refresh:function(n){return t.onRefresh(e)}},model:{value:e.status.refreshing,callback:function(n){t.$set(e.status,"refreshing",n)},expression:"item.status.refreshing"}},[n("van-list",{attrs:{finished:e.status.finish,"finished-text":"没有更多了","error-text":"请求失败，点击重新加载",error:e.status.error},on:{"update:error":function(n){return t.$set(e.status,"error",n)},load:function(n){return t.getMyResources(e)}},model:{value:e.status.loading,callback:function(n){t.$set(e.status,"loading",n)},expression:"item.status.loading"}},t._l(e.resources,(function(t){return n("resource-item",{key:e.tag+"_"+t.id+1e3*Math.random(),attrs:{resource:t}})})),1)],1)],1)})),1),t.categories.length>8?n("van-dropdown-menu",{ref:"dropdown",staticClass:"categories-dropdown"},[n("van-dropdown-item",{attrs:{options:t.categories},model:{value:t.categoryActive,callback:function(e){t.categoryActive=e},expression:"categoryActive"}},[n("span",{staticClass:"iconfont icon-arrowdown",attrs:{slot:"title"},slot:"title"}),n("span",{staticClass:"iconfont icon-arrowup",attrs:{slot:"title"},slot:"title"})])],1):t._e()],1)],1)},a=[],s=(n("99af"),n("b0c0"),n("d3b7"),n("ade3")),r=(n("fa76"),n("41a3")),c=n.n(r),l=(n("e313"),n("24e9")),u=n.n(l),d=(n("0af8"),n("01db")),f=n.n(d),p=(n("8b27"),n("55f4")),h=n.n(p),v=(n("e825"),n("2d92")),g=n.n(v),m=(n("4f89"),n("4ee8")),b=n.n(m),w=(n("3bdd"),n("6c6e")),y=n("e111"),O=n("9f9b"),C={name:"resources",components:(o={},Object(s["a"])(o,b.a.name,b.a),Object(s["a"])(o,g.a.name,g.a),Object(s["a"])(o,h.a.name,h.a),Object(s["a"])(o,f.a.name,f.a),Object(s["a"])(o,u.a.name,u.a),Object(s["a"])(o,c.a.name,c.a),Object(s["a"])(o,"resourceItem",y["a"]),Object(s["a"])(o,"topNavBar",O["a"]),o),data:function(){return{categoryActive:0,title:"",categories:[],dropdownOpen:!1,defaultStatus:{currentPage:0,error:!1,finish:!1,loading:!1,refreshing:!1}}},created:function(){this.getCategories()},methods:{getCategories:function(){var t=this,e=this.$route.params.id;return new Promise((function(n,o){Object(w["b"])({id:e}).then((function(e){var o=e.data,i=o.subCategories;i.unshift({id:"all",name:"全部"});for(var a=0;a<i.length;a++)i[a].status=Object.assign({},t.defaultStatus),i[a].text=i[a].name,i[a].value=a,t.$set(t.categories,a,i[a]);t.title=o.name,n()})).catch((function(t){console.log(t),o(t)}))}))},getMyResources:function(t){var e=this;return new Promise((function(n,o){var i=t.status;i.currentPage=i.currentPage+1,Object(w["c"])({id:t.id,page:i.currentPage}).then((function(o){var a=o.data;o.empty&&1==o.empty?i.finish=!0:1!=i.currentPage&&t.resources?t.resources=t.resources.concat(a.resources):e.$set(t,"resources",a.resources),i.loading=!1,n()})).catch((function(t){i.currentPage=i.currentPage-1,i.error=!0,i.loading=!1,i.errorMsg=t,console.log(t),o(t)}))}))},onRefresh:function(t){var e=t.status;e.currentPage=0,this.getMyResources(t).then((function(){return e.refreshing=!1})).catch((function(){return e.refreshing=!1}))}}},k=C,x=(n("1183"),n("2877")),P=Object(x["a"])(k,i,a,!1,null,"196a9fe3",null);e["default"]=P.exports}}]);
//# sourceMappingURL=chunk-e12c2fe8.56d70de8.js.map